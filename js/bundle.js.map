{"version":3,"sources":["webpack:///webpack/bootstrap f0f20326f0da307ea0cd","webpack:///./constants.js","webpack:///./js/util.js","webpack:///./js/vertex.js","webpack:///./js/watch_dogs.js","webpack:///./js/game.js","webpack:///./js/edge.js","webpack:///./js/graph.js","webpack:///./js/game_view.js"],"names":["module","exports","COLOR","COLOR_SELECTED","COLOR_NEIGHBOR","BLACK","WHITE","LINE_FREE","LINE_INTERSECTING","RADIUS","EPSILON","Util","slope","vertex1","vertex2","y","x","distFromMouse","vertex","currentMousePos","vertexRadius","Math","sqrt","pow","Constants","require","Vertex","options","index","color","radius","edges","selected","prototype","pos","draw","ctx","fillStyle","shadowColor","shadowBlur","beginPath","arc","PI","fill","neighbors","forEach","edge","push","Game","GameView","document","addEventListener","canvasEl","getElementsByTagName","window","innerHeight","innerWidth","DIM_X","DIM_Y","width","height","getContext","rootEl","$","level","stage","Edge","Graph","moves","setPlaySize","buildGraph","setVertexSize","$board","leftOffset","css","left","vertices","length","isPlanar","planar","edge1","i1","edge2","i2","intersectsWith","n","edgeCoords","generateEdges","numVertices","j","xOffset","yOffset","xResize","yResize","cos","sin","verticesReached","edgeCoord","i","idx","includes","v2","dropVertices","currentlyIntersecting","strokeStyle","lineWidth","moveTo","lineTo","stroke","xIntercept","isVertical","isHorizontal","yIntercept","shareVertex","abs","intersectsAtX","xValue","yValue","minX","min","maxX","max","minY","maxY","response","slope1","slope2","xWithinRange","yWithinRange","allEdges","intersecting","pairIndex","vertexIdx","generateLines","lines","slopes","v1","random","line","line1","intersections","line2","intersection","lineIdx","sort","intersect1","intersect2","l1","l2","indices1","indices2","a","b","root","renderButtons","bindButtonEvents","bindGraphEvents","renderRules","playLevel","game","renderGraph","renderModal","that","playGame","follow","requestAnimationFrame","levelUp","display","levelDown","prevRules","getElementsByClassName","$rulesModal","addClass","$rulesContent","$rules","text","append","$playButton","on","prevModals","$modal","$modalContent","$congrats","$stats","$level","$stage","$moves","$nextButton","event","stopPropagation","preventDefault","cancelAnimationFrame","refreshIntervalId","$button2","$button3","$github","$buttonRules","$canvasDiv","checkPlanarity","$winModal","empty","off","clearRect","vertexSelected","withinVertex","originalEvent","targetTouches","touch","yAdjust","xAdjust","pageX","pageY","console","log","dist","neighbor","mousemove","newX","newY"],"mappings":"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","file":"./js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f0f20326f0da307ea0cd","\"use strict\";\n\nmodule.exports = {\n\tCOLOR: \"#046FD8\",\n  COLOR_SELECTED: \"#47D6B6\",\n  COLOR_NEIGHBOR: \"#4531B1\",\n  BLACK: \"#000000\",\n  WHITE: \"#FFFFFF\",\n  LINE_FREE: \"#6AF794\",\n  LINE_INTERSECTING: \"#FF9090\",\n\tRADIUS: 15,\n  EPSILON: 0.00001\n};\n\n\n\n// WEBPACK FOOTER //\n// ./constants.js","\"use strict\";\n\nconst Util = {\n  slope(vertex1, vertex2) {\n    return (vertex2.y - vertex1.y) / (vertex2.x - vertex1.x);\n  },\n\n  distFromMouse(vertex, currentMousePos) {\n    const vertexRadius = 12.5;\n\n    return Math.sqrt(\n      Math.pow(vertex.x + vertexRadius - currentMousePos.x, 2) + Math.pow(vertex.y + vertexRadius - currentMousePos.y, 2)\n    );\n  }\n\n};\n\nmodule.exports = Util;\n\n\n\n// WEBPACK FOOTER //\n// ./js/util.js","\"use strict\";\n\nconst Constants = require('../constants');\n\nconst Vertex = function(options) {\n  this.index = options.index;\n  this.x = options.x;\n  this.y = options.y;\n  this.color = Constants.BLACK;\n  this.radius = Constants.RADIUS;\n  this.edges = [];\n  this.selected = false;\n};\n\nVertex.prototype.pos = function() {\n  return [this.x, this.y];\n};\n\nVertex.prototype.draw = function(ctx) {\n  ctx.fillStyle = this.color;\n  ctx.shadowColor = this.color;\n  ctx.shadowBlur = 10;\n  ctx.beginPath();\n  ctx.arc(this.x, this.y, Vertex.RADIUS, 0, 2 * Math.PI);\n  ctx.fill();\n};\n\nVertex.prototype.neighbors = function() {\n  let neighbors = [];\n\n  this.edges.forEach( edge => {\n    if (edge.vertex1 === this) {\n      neighbors.push(edge.vertex2);\n    } else {\n      neighbors.push(edge.vertex1);\n    }\n  });\n  return neighbors;\n};\n\nmodule.exports = Vertex;\n\n\n\n// WEBPACK FOOTER //\n// ./js/vertex.js","\"use strict\";\n\nconst Game = require(\"./game\")\n    , GameView = require(\"./game_view\");\n\ndocument.addEventListener(\"DOMContentLoaded\", function(){\n  const canvasEl = document.getElementsByTagName(\"canvas\")[0];\n\n  if (window.innerHeight < window.innerWidth) {\n    Game.DIM_X = window.innerHeight * 0.8;\n    Game.DIM_Y = window.innerHeight * 0.8;\n  } else {\n    Game.DIM_X = window.innerWidth;\n    Game.DIM_Y = window.innerWidth;\n  }\n\n  canvasEl.width = Game.DIM_X;\n  canvasEl.height = Game.DIM_Y;\n\n  const ctx = canvasEl.getContext(\"2d\");\n  const rootEl = $('.planary-root');\n\n  new GameView(ctx, rootEl, {level: 0, stage: 0});\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/watch_dogs.js","\"use strict\";\n\nconst Constants = require('../constants')\n    , Edge = require(\"./edge\")\n    , Graph = require(\"./graph\")\n    , Util = require(\"./util\")\n    , Vertex = require(\"./vertex\");\n\nconst Game = function (options) {\n  this.level = options.level || 0;\n  this.stage = options.stage || 0;\n  this.moves = 0;\n\n  this.setPlaySize();\n  this.buildGraph();\n  this.setVertexSize();\n};\n\nGame.prototype.setPlaySize = function() {\n  const $board = $(\".canvas-div\");\n  $board.width(Game.DIM_X).height(Game.DIM_Y);\n\n  Game.leftOffset = (window.innerWidth - Game.DIM_X) / 2;\n  $board.css( {left: Game.leftOffset} );\n};\n\nGame.prototype.setVertexSize = function() {\n  Vertex.RADIUS = (Game.DIM_X / this.vertices.length / 10) + 5;\n};\n\nGame.prototype.isPlanar = function() {\n  let planar = true;\n\n  this.edges.forEach( (edge1, i1) => {\n    this.edges.forEach( (edge2, i2) => {\n      if (i1 !== i2 && edge1.intersectsWith(edge2)) {\n        planar = false;\n      }\n    });\n  });\n\n  return planar;\n};\n\nGame.prototype.buildGraph = function() {\n  this.vertices = [];\n  this.edges = [];\n  const n = this.level + 4;\n\n  const edgeCoords = Graph.generateEdges(n);\n  let numVertices = (n * (n-1)/2);\n\n  if (this.level > 0) {\n    numVertices = (n * (n-1)/2) - (n-1) + this.stage + 1;\n  }\n\n  for (let j = 0; j < numVertices; j++) {\n\n    const xOffset = Game.DIM_X/2;\n    const yOffset = Game.DIM_Y/2;\n\n    const xResize = Game.DIM_X*0.35;\n    const yResize = Game.DIM_Y*0.35;\n\n    const x = Math.cos(j * 2 * Math.PI / numVertices) * xResize + xOffset;\n    const y = Math.sin(j * 2 * Math.PI / numVertices) * xResize + xOffset;\n\n    this.vertices.push(new Vertex({ x: x, y: y, index: j }) );\n  }\n\n  let verticesReached = [];\n  edgeCoords.forEach ( (edgeCoord, i) => {\n\n    if (edgeCoord[0] < numVertices && edgeCoord[1] < numVertices) {\n      const edge = new Edge({ vertex1: this.vertices[edgeCoord[0]],\n                              vertex2: this.vertices[edgeCoord[1]],\n                              idx: i });\n      this.edges.push(edge);\n\n      this.vertices[edgeCoord[0]].edges.push(edge);\n      this.vertices[edgeCoord[1]].edges.push(edge);\n\n      verticesReached.push(edgeCoord[0]);\n      verticesReached.push(edgeCoord[1]);\n    }\n  });\n\n  for (let i = 0; i < numVertices; i++) {\n    if (!verticesReached.includes(i)) {\n      let v2 = 0;\n      if (i === v2) { v2 += 1; }\n      const edge = new Edge({ vertex1: this.vertices[i],\n                              vertex2: this.vertices[v2],\n                              idx: edges.length });\n      this.edges.push(edge);\n\n      this.vertices[i].edges.push(edge);\n      this.vertices[v2].edges.push(edge);\n    }\n  }\n\n  // If graph is already solved, generate new graph\n  if (this.isPlanar()) {\n    this.buildGraph();\n  }\n\n};\n\nGame.prototype.dropVertices = function() {\n  this.vertices.forEach( vertex => {\n    vertex.selected = false;\n    vertex.color = Constants.BLACK;\n  });\n};\n\nmodule.exports = Game;\n\n\n\n// WEBPACK FOOTER //\n// ./js/game.js","\"use strict\";\n\nconst Constants = require('../constants')\n    , Util = require(\"./util\");\n\nconst Edge = function(options) {\n  this.vertex1 = options.vertex1;\n  this.vertex2 = options.vertex2;\n  this.idx = options.idx;\n};\n\nEdge.prototype.draw = function(ctx, edges) {\n  if (this.currentlyIntersecting(edges)) {\n    ctx.strokeStyle = Constants.LINE_INTERSECTING;\n    ctx.shadowColor = Constants.LINE_INTERSECTING;\n    ctx.lineWidth = 5;\n    ctx.shadowBlur = 10;\n    ctx.beginPath();\n    ctx.moveTo(this.vertex1.x, this.vertex1.y);\n    ctx.lineTo(this.vertex2.x, this.vertex2.y);\n    ctx.stroke();\n\n  } else {\n    ctx.strokeStyle = Constants.BLACK;\n    ctx.shadowColor = Constants.BLACK;\n    ctx.lineWidth = 5;\n    ctx.shadowBlur = 15;\n    ctx.beginPath();\n    ctx.moveTo(this.vertex1.x, this.vertex1.y);\n    ctx.lineTo(this.vertex2.x, this.vertex2.y);\n    ctx.stroke();\n  }\n};\n\nEdge.prototype.slope = function() {\n\n  if (this.vertex1.x === this.vertex2.x) {\n    return 100000;\n  } else if (this.vertex1.x < this.vertex2.x) {\n    return (this.vertex2.y - this.vertex1.y) / (this.vertex2.x - this.vertex1.x);\n  } else {\n    return (this.vertex1.y - this.vertex2.y) / (this.vertex1.x - this.vertex2.x);\n  }\n\n};\n\nEdge.prototype.xIntercept = function() {\n  if (this.isVertical()) {\n    return this.vertex1.x;\n  } else if (this.isHorizontal()) {\n    return 1000000;\n  } else {\n    return -this.yIntercept()/this.slope();\n  }\n};\n\nEdge.prototype.yIntercept = function() {\n  if (this.isVertical()) {\n    return 1000000;\n  } else if (this.isHorizontal()) {\n    return this.vertex1.y;\n  } else {\n    return this.vertex1.y - (this.slope()*this.vertex1.x);\n  }\n};\n\nEdge.prototype.shareVertex = function(edge) {\n  return (\n    this.vertex1 === edge.vertex1\n    || this.vertex1 === edge.vertex2\n    || this.vertex2 === edge.vertex1\n    || this.vertex2 === edge.vertex2\n  );\n};\n\nEdge.prototype.isVertical = function() {\n  return (Math.abs(this.vertex1.x - this.vertex2.x) < Constants.EPSILON);\n};\n\nEdge.prototype.isHorizontal = function() {\n  return (Math.abs(this.vertex1.y - this.vertex2.y) < Constants.EPSILON);\n};\n\nEdge.prototype.intersectsAtX = function(edge) {\n  return (edge.yIntercept() - this.yIntercept()) / (this.slope() - edge.slope());\n};\n\nEdge.prototype.xValue = function(y) {\n  return (y - this.yIntercept())/this.slope();\n};\n\nEdge.prototype.yValue = function(x) {\n  return (this.slope() * x) + this.yIntercept();\n};\n\nEdge.prototype.minX = function() {\n  return Math.min(this.vertex1.x, this.vertex2.x);\n};\n\nEdge.prototype.maxX = function() {\n  return Math.max(this.vertex1.x, this.vertex2.x);\n};\n\nEdge.prototype.minY = function() {\n  return Math.min(this.vertex1.y, this.vertex2.y);\n};\n\nEdge.prototype.maxY = function() {\n  return Math.max(this.vertex1.y, this.vertex2.y);\n};\n\nEdge.prototype.intersectsWith = function(edge) {\n  // If edges are the same\n  if (this === edge) {\n    return false;\n\n  // If edges share a vertex\n  } else if (this.vertex1 === edge.vertex1) {\n    let response = false;\n\n    let slope1 = Util.slope(this.vertex1, this.vertex2);\n    let slope2 = Util.slope(edge.vertex1, edge.vertex2);\n\n    if (slope1 === slope2) {\n      response = true;\n    }\n    return response;\n\n  } else if (this.vertex1 === edge.vertex2) {\n    let response = false;\n\n    let slope1 = Util.slope(this.vertex1, this.vertex2);\n    let slope2 = Util.slope(edge.vertex2, edge.vertex1);\n\n    if (slope1 === slope2) {\n      response = true;\n    }\n    return response;\n\n  } else if (this.vertex2 === edge.vertex1) {\n    let response = false;\n\n    let slope1 = Util.slope(this.vertex2, this.vertex1);\n    let slope2 = Util.slope(edge.vertex1, edge.vertex2);\n\n    if (slope1 === slope2) {\n      response = true;\n    }\n    return response;\n\n  } else if (this.vertex2 === edge.vertex2) {\n    let response = false;\n\n    let slope1 = Util.slope(this.vertex2, this.vertex1);\n    let slope2 = Util.slope(edge.vertex2, edge.vertex1);\n\n    if (slope1 === slope2) {\n      response = true;\n    }\n    return response;\n\n  // If one of the edges is horizontal\n  } else if (this.isHorizontal()) {\n    let response = false;\n\n    if (edge.minY()+1 < this.vertex1.y && this.vertex1.y < edge.maxY()-1) {\n      if (edge.isVertical()) {\n        response = true;\n      } else {\n        let xValue = edge.xValue(this.vertex1.y);\n        if (this.minX()+1 < xValue && xValue < this.maxX()-1) {\n          response = true;\n        }\n      }\n    }\n    return response;\n\n  } else if (edge.isHorizontal()) {\n    let response = false;\n    if (this.minY()+1 < edge.vertex1.y && edge.vertex1.y < this.maxY()-1) {\n      if (this.isVertical()) {\n        response = true;\n      } else {\n        let xValue = this.xValue(edge.vertex1.y);\n        if (edge.minX()+1 < xValue && xValue < edge.maxX()-1) {\n          response = true;\n        }\n      }\n    }\n    return response;\n\n  // If one of the edges is vertical\n  } else if (this.isVertical()) {\n    let response = false;\n    if (edge.minX()+1 < this.vertex1.x && this.vertex1.x < edge.maxX()-1) {\n      if (edge.isHorizontal()) {\n        response = true;\n      } else {\n        let yValue = edge.yValue(this.vertex1.x);\n        if (this.minY()+1 < yValue && yValue < this.maxY()-1) {\n          response = true;\n        }\n      }\n    }\n    return response;\n\n  } else if (edge.isVertical()){\n    let response = false;\n\n    if (this.minX()+1 < edge.vertex1.x && edge.vertex1.x < this.maxX()-1) {\n      if (this.isHorizontal()) {\n        response = true;\n      } else {\n        let yValue = this.yValue(edge.vertex1.x);\n        if (edge.minY()+1 < yValue && yValue < edge.maxY()-1) {\n          response = true;\n        }\n      }\n    }\n    return response;\n\n  // If edges are parallel\n  } else if (this.slope() === edge.slope()) {\n    return false;\n\n  // If edges are both diagonal and do not share a vertex\n  } else {\n    const x = this.intersectsAtX(edge);\n    const y = this.yValue(x);\n\n    const xWithinRange = (this.minX()+1 < x && x < this.maxX()-1 && edge.minX()+1 < x && x < edge.maxX()-1);\n    const yWithinRange = (this.minY()+1 < y && y < this.maxY()-1 && edge.minY()+1 < y && y < edge.maxY()-1);\n\n    return xWithinRange && yWithinRange;\n  }\n};\n\nEdge.prototype.currentlyIntersecting = function(allEdges) {\n  let intersecting = false;\n\n  allEdges.forEach( edge => {\n    if (this.intersectsWith(edge)) {\n      intersecting = true;\n    }\n  });\n  return intersecting;\n};\n\nmodule.exports = Edge;\n\n\n\n// WEBPACK FOOTER //\n// ./js/edge.js","\"use strict\";\n\nconst Edge = require(\"./edge\")\n    , Util = require(\"./util\")\n    , Vertex = require(\"./vertex\");\n\nconst Graph = {\n\n  pairIndex(n) {\n    let pairIndex = {};\n\n    let vertexIdx = 0;\n    for (let i = 0; i <= n; i++) {\n      for (let j = i+1; j<n; j++) {\n        pairIndex[`${i},${j}`] = vertexIdx;\n        vertexIdx++;\n      }\n    }\n\n    return pairIndex;\n  },\n\n  generateLines(n) {\n    let lines = [];\n    let slopes = [];\n\n    while (lines.length < n) {\n      let v1 = new Vertex( { x: Math.random(), y: Math.random() });\n      let v2 = new Vertex( { x: Math.random(), y: Math.random() });\n\n      let slope = Util.slope(v1, v2);\n      // let inverseSlope = Util.slope(v2, v1);\n      if (!slopes.includes(slope)) {\n        let line = new Edge({ vertex1: v1, vertex2: v2, idx: lines.length});\n        lines.push(line);\n      }\n    }\n    return lines;\n  },\n\n  generateEdges(n) {\n    // Build pairIndex hash from { [pair]: indexOfVertex }\n    let pairIndex = this.pairIndex(n);\n\n    // Generate n * (n-1)/2 random lines of differing slope\n    const lines = this.generateLines(n);\n\n    // For each line, find the intersection points\n    // of that line with all other lines\n    let edges = [];\n    lines.forEach( (line1, i1) => {\n      let intersections = [];\n\n      lines.forEach( (line2, i2) => {\n        if (i1 !== i2) {\n          let intersection = line1.intersectsAtX(line2);\n          intersections.push( { x: intersection, lineIdx: i2 } );\n        }\n\n      });\n\n      // Order lines by intersection point's X coord\n      intersections.sort( (intersect1, intersect2) => {\n        return intersect1.x - intersect2.x;\n      });\n\n      // For each pair of neighboring intersections\n      // create a new edge between them\n      for (let i = 0; i < intersections.length-1; i++) {\n        let l1 = intersections[i];\n        let l2 = intersections[i+1];\n\n        let indices1 = [i1, l1.lineIdx];\n        let indices2 = [i1, l2.lineIdx];\n\n        indices1.sort( (a, b) => a-b  );\n        indices2.sort( (a, b) => a-b  );\n\n        let v1 = pairIndex[indices1];\n        let v2 = pairIndex[indices2];\n\n        edges.push([v1, v2]);\n      }\n\n    });\n\n    return edges;\n  }\n\n};\n\nmodule.exports = Graph;\n\n\n\n// WEBPACK FOOTER //\n// ./js/graph.js","\"use strict\";\n\nconst Constants = require('../constants')\n    , Game = require(\"./game\")\n    , Util = require(\"./util\")\n    , Vertex = require('./vertex');\n\nconst GameView = function (ctx, root, options) {\n  this.ctx = ctx;\n  this.root = root;\n  this.currentMousePos = { x: -1, y: -1 };\n  this.level = options.level || 0;\n  this.stage = options.stage || 0;\n\n  this.renderButtons();\n  this.bindButtonEvents();\n  this.bindGraphEvents();\n  this.renderRules();\n  this.playLevel(this.level);\n};\n\nGameView.prototype.playLevel = function() {\n  this.game = new Game({level: this.level, stage: this.stage});\n\n  this.renderGraph();\n  this.renderModal();\n\n  let that = this;\n  function playGame() {\n    that.follow(that.game, that.currentMousePos);\n    that.renderGraph();\n    requestAnimationFrame(playGame);\n  }\n  requestAnimationFrame(playGame);\n};\n\nGameView.prototype.levelUp = function() {\n  this.stage += 1;\n  this.game.moves = 0;\n  if (this.stage > 0) {\n    $(\".description\").css( {display: \"none\"} );\n  }\n\n  if (this.level === 0 || this.stage >= this.level + 3) {\n    this.level += 1;\n    this.stage = 0;\n  }\n};\n\nGameView.prototype.levelDown = function() {\n  this.stage -= 1;\n  this.game.moves = 0;\n  if (this.stage < 0) {\n    this.level -= 1;\n    this.stage = this.level + 3;\n  }\n};\n\nGameView.prototype.renderRules = function() {\n  const prevRules = document.getElementsByClassName(\"rules\");\n\n  if (prevRules.length > 0) {\n    const $rulesModal = $(prevRules[0]);\n    $rulesModal.css({display: \"block\"});\n  } else {\n    const $rulesModal = $(\"<div>\").addClass(\"modal\")\n                        .addClass(\"rules\")\n                        .css({display: \"block\"});\n    const $rulesContent = $(\"<div>\").addClass(\"modal-content\");\n    const $rules = $(\"<p>\").text(\"Voce pode salvar seu pais de atentados terroristas hackeando. Transforme os grafos em planares!\");\n\n    // const $definitions = $(\"<p class='definitions'>A <a href='https://en.wikipedia.org/wiki/Graph_(discrete_mathematics)'>graph</a> is a collection of nodes and edges.</br>A graph is <a href='https://en.wikipedia.org/wiki/Planar_graph'>planar</a> when it has no intersecting edges.</p>\");\n\n    $rulesContent.append($rules);\n    $rulesModal.append($rulesContent);\n\n    const $playButton = $(\"<a>\").text(\"Jogar\")\n                        .addClass(\"button\")\n                        .addClass(\"play\");\n\n    $rulesContent.append($playButton);\n    // $rulesContent.append($definitions);\n\n    $playButton.on(\"touchstart click\", event => {\n      $rulesModal.css( {display: \"none\"} );\n    });\n\n    $rulesModal.on(\"touchstart click\", event => {\n      $rulesModal.css( {display: \"none\"} );\n    });\n\n    this.root.append($rulesModal);\n  }\n\n};\n\nGameView.prototype.renderModal = function() {\n  const prevModals = document.getElementsByClassName(\"win-modal\");\n\n  if (prevModals.length > 0) {\n    const $modal = $(prevModals[0]);\n\n  } else {\n    const $modal = $(\"<div>\").addClass(\"modal\")\n                  .addClass(\"win-modal\")\n                  .css( {display: \"none\"} );\n\n    const $modalContent = $(\"<div>\").addClass(\"modal-content\").addClass(\"win-modal-content\");\n    const $congrats = $(\"<h2>\").text(\"Parabens, voce hackeou um terrorista e salvou o seu pais de um atentado!\");\n\n    const $stats = $(\"<p>\").addClass(\"stats\");\n    const $level = $(\"<div>\").addClass(\"results level\");\n    const $stage = $(\"<div>\").addClass(\"results stage\");\n    const $moves = $(\"<div>\").addClass(\"results moves\");\n\n    $stats.append($level);\n    $stats.append($stage);\n    $stats.append($moves);\n\n    $modalContent.append($congrats);\n    $modalContent.append($stats);\n    $modal.append($modalContent);\n\n    const $nextButton = $(\"<a>\").text(\"Proximo Level\")\n                        .addClass(\"button\")\n                        .addClass(\"next-level-modal\");\n\n    $modalContent.append($nextButton);\n\n    $nextButton.on(\"touchstart click\", event => {\n      event.stopPropagation();\n      event.preventDefault();\n\n      this.levelUp();\n      $modal.css({display: \"none\"});\n      cancelAnimationFrame(this.refreshIntervalId);\n      this.playLevel();\n    });\n\n    $modal.on(\"touchstart click\", event => {\n      event.stopPropagation();\n      event.preventDefault();\n\n      this.levelUp();\n      $modal.css({display: \"none\"});\n      cancelAnimationFrame(this.refreshIntervalId);\n      this.playLevel();\n    });\n\n    this.root.append($modal);\n  }\n\n};\n\nGameView.prototype.renderButtons = function() {\n\n  const $button2 = $(\"<div>\").addClass(\"button\").addClass(\"nav\").addClass(\"previous-level\");\n  const $button3 = $(\"<div>\").addClass(\"button\").addClass(\"nav\").addClass(\"next-level\");\n  const $github = $(`<a href=\"https://github.com/leodsgn/watch_dogz_graph_game\" target=\"_blank\"><div class=\"button github\"/></a>`);\n\n  const $buttonRules = $(\"<a>\").addClass(\"button\")\n                        .addClass(\"show-rules\")\n                        .text(\"Sobre\");\n  const $canvasDiv = $(\".canvas-div\");\n\n  $canvasDiv.append($button2);\n  $canvasDiv.append($button3);\n  $canvasDiv.append($github);\n  $canvasDiv.append($buttonRules);\n};\n\nGameView.prototype.checkPlanarity = function() {\n  if (this.game.isPlanar()) {\n    const $winModal = $(\".win-modal\");\n\n    const $stats = $(\"<p>\");\n    const $level = $(\".level\").empty().append(`Level: <span>${this.level+1}</span>`);\n    const $stage = $(\".stage\").empty().append(`Estagio: <span>${this.stage+1}</span>`);\n    const $moves = $(\".moves\").empty().append(`Movimentos: <span>${this.game.moves}</span>`);\n\n    $winModal.css({display: \"block\"});\n  }\n};\n\nGameView.prototype.bindButtonEvents = function() {\n\n  $(\".previous-level\").off(\"touchstart\");\n  $(\".previous-level\").off(\"click\");\n  $(\".previous-level\").on(\"click touchstart\", event => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    if (this.level > 0) {\n      this.levelDown();\n      this.playLevel(this.level);\n    }\n  });\n\n  $(\".next-level\").off(\"touchstart\");\n  $(\".next-level\").off(\"click\");\n  $(\".next-level\").on(\"click touchstart\", event => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    this.levelUp();\n    this.playLevel(this.level);\n  });\n\n  $(\".show-rules\").off(\"touchstart\");\n  $(\".show-rules\").off(\"click\");\n  $(\".show-rules\").on(\"click touchstart\", event => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    $(\".rules\").css( {display: \"block\"} );\n  });\n\n};\n\nGameView.prototype.renderGraph = function() {\n  this.ctx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n\n  this.game.edges.forEach( (edge, i) => {\n    edge.draw(this.ctx, this.game.edges);\n  });\n\n  this.game.vertices.forEach( (vertex, i) => {\n    vertex.draw(this.ctx);\n  });\n\n};\n\nGameView.prototype.bindGraphEvents = function() {\n\n  $(\"canvas\").off(\"mousedown\");\n  $(\"canvas\").off(\"touchstart\");\n  $(\"canvas\").on(\"mousedown touchstart\", event => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    let vertexSelected = false;\n    let withinVertex = 30;\n\n    if (Vertex.RADIUS > 7) {\n      withinVertex += (Vertex.RADIUS - 7);\n    }\n\n    if (event.originalEvent.targetTouches) {\n      let touch = event.originalEvent.targetTouches[0];\n      if (touch) {\n        const yAdjust = -106;\n        const xAdjust = 0;\n\n        this.currentMousePos.x = touch.pageX + xAdjust - Game.leftOffset;\n        this.currentMousePos.y = touch.pageY + yAdjust;\n        console.log(\"NEW TOUCH DOWN\");\n        console.log(`${this.currentMousePos.x}, ${this.currentMousePos.y}`);\n      }\n    }\n\n    this.game.vertices.forEach( vertex => {\n      const dist = Util.distFromMouse(vertex, this.currentMousePos);\n      console.log(`${vertex.x}, ${vertex.y}`);\n\n      if (dist < withinVertex && !vertexSelected) {\n        this.game.moves += 1;\n\n        vertex.selected = true;\n        vertex.color = Constants.COLOR_SELECTED;\n        vertexSelected = true;\n\n        vertex.neighbors().forEach(neighbor => {\n          neighbor.color = Constants.COLOR_NEIGHBOR;\n        });\n      }\n    });\n\n  });\n\n  $(document).off(\"mouseup\");\n  $(document).off(\"touchend\");\n  $(document).on(\"mouseup touchend\", event => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    this.game.dropVertices();\n    this.checkPlanarity();\n  });\n\n  $(document).off(\"mousemove\");\n  $(document).mousemove( event => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    const yAdjust = -106;\n    const xAdjust = 0;\n\n    this.currentMousePos.x = event.pageX + xAdjust - Game.leftOffset;\n    this.currentMousePos.y = event.pageY + yAdjust;\n  });\n\n  $(document).off(\"touchmove\");\n  $(document).on(\"touchmove\", event => {\n    event.stopPropagation();\n    event.preventDefault();\n    let touch = event.originalEvent.targetTouches[0];\n\n    if (touch) {\n      const yAdjust = -106;\n      const xAdjust = 0;\n\n      this.currentMousePos.x = touch.pageX + xAdjust - Game.leftOffset;\n      this.currentMousePos.y = touch.pageY + yAdjust;\n    }\n  });\n\n};\n\nGameView.prototype.follow = function(game, currentMousePos) {\n  game.vertices.forEach( vertex => {\n    if (vertex.selected) {\n      let newX = Math.min(Math.max(currentMousePos.x, Vertex.RADIUS), Game.DIM_X-Vertex.RADIUS);\n      let newY = Math.min(Math.max(currentMousePos.y, Vertex.RADIUS), Game.DIM_Y-Vertex.RADIUS);\n\n      vertex.x = newX;\n      vertex.y = newY;\n    }\n  });\n\n};\n\nmodule.exports = GameView;\n\n\n\n// WEBPACK FOOTER //\n// ./js/game_view.js"],"sourceRoot":""}